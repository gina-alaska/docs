<!--- 33 -->
<!--- user 45 --> 
Hi there, 
Does anyone have an example .axl file that can be used to connect to one of the WMS services provided by the SDMI project?

Thanks in advance!
<!--- 34 -->
<!--- user 1 --> 
Torsten,

We are looking into answering this question.  Pete is working on coming up with a good answer.  We'll try to have something for you to try out before the end of the week.

-dayne
<!--- 35 -->
<!--- user 47 --> 
Well Yes and No.  There is a way to get WMS into IMS but you can't do it with an AXL file.

Essentially you tell the browser to get the WMS layer and put it behind or on top of the image generated by IMS.

You can see an example of this if you pull up the AFS Fire site (http://afsmaps.blm.gov/imf/imf.jsp?site=fire) and open the background folder and 
check Best Available Image Data.

You will need to zoom in past 1,500,000 and the site will start pulling from http://wms.alaskamapped.org/cgi-bin/bdl.cgi.
I have my own copy of the BMNG data so the site doesn't need to pull from alaskamapped until zoomed in.

This is not an ideal solution since there is a pause while the image data fills in.  The other possibility is to have the server get the image and then send both images
at the same time.  This was not possible for me since the site is not allowed to call out.
<!--- 36 -->
<!--- user 47 --> 
To Continue.

I use the Moximedia IMF to add wms layers so there is no work load for me.

With that said, this is what the framework does:

There is a createLayer function sent to the frame that holds the map (my site uses frames) 
function createLayer(name, inleft, intop, width, height, visible, content) {
  var layer;
  if (document.all || document.getElementById) {
    document.writeln('<div id="' + name + '" style="position:absolute; overflow:hidden; left:' + inleft + 'px; top:' + intop + 'px; width:' + width + 'px; height:' + height + 'px; z-index:1; border: 0px; visibility:' + (visible ? 'visible;' : 'hidden;') +  '">');
    document.writeln(content);
    document.writeln('</div>');
  } else if (document.layers) {
    document.writeln('<layer name="' + name + '" left=' + inleft + ' top=' + intop + ' width=' + width + ' height=' + height +  ' visibility=' + (visible ? 'show' : 'hide') +  '>');
    document.writeln(content);
    document.writeln('</layer>');
  }
}
This called like such:
createLayer('map0',0,0,979,708,true,'<img src="http://wms.alaskamapped.org/cgi-bin/bdl.cgi?BGCOLOR=0xFFFFFF&REQUEST=GetMap&VERSION=1.1.1&FORMAT=image/jpg&SRS=EPSG:102006&WIDTH=979&HEIGHT=708&BBOX=585542.4343335676,1444388.93207353,723965.2888533423,1544494.5306435&LAYERS=BestDataAvailableLayer&STYLES=&TRANSPARENT=TRUE&" hspace="0" vspace="0" border="0" width="979" height="708">');

And this code is generated on map refreshes by 

    out.print("createLayer('map" + mapImageCount + "',0,0,");
    out.print(map.getWidth() + "," + map.getHeight() + ",true,");
    out.print("'<img src=\"");
    out.print(wmsLyr.getMapRequestUrlString());
    out.print("\" hspace=\"0\" vspace=\"0\" border=\"0\" width=\"");
    out.print(map.getWidth());
    out.print("\" height=\"");
    out.print(map.getHeight());
    out.print("\">');\n");
    out.print("mapimage[" + mapImageCount + "] = 'map" +  mapImageCount + "';\n");
    mapImageCount++;


The details of this are heavily dependent on the framework I use but the same functionality is available in standard IMS.

Gary
<!--- 37 -->
<!--- user 45 --> 
Thanks for response guys.  I spent a bit of time on the ESRI forums and can confirm that you can't ingest WMS layers using an .axl file, too bad! I'll give Gary's solution  a whirl, which should work fine for me. Thanks again for the advice.
